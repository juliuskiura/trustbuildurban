{% load i18n %}
<div class="ai-widget ai-widget-input" data-field-type="CharField">
    <div class="ai-widget-input-wrapper">
        <input{% include "django/forms/widgets/attrs.html" %} type="text" data-ai-field="true" value="{{ widget.value }}">
    </div>
    <div class="ai-widget-controls">
        <button type="button" 
                class="ai-generate-btn"
                data-field-label="{{ widget.ai_field_label }}"
                data-help-text="{{ widget.ai_help_text }}"
                data-max-length="{{ widget.ai_max_length }}"
                data-field-type="CharField"
                data-context-fields="{{ widget.ai_context_fields }}"
                data-loading-text="{{ widget.ai_loading_text }}">
            <span class="ai-btn-icon">‚ú®</span>
            <span class="ai-btn-text">{{ widget.ai_button_text }}</span>
            <span class="ai-btn-loading" style="display: none;">
                <span class="ai-spinner"></span>
            </span>
        </button>
        {% if widget.ai_allow_custom_prompt %}
        <button type="button" class="ai-custom-prompt-btn" title="Add custom instructions">
            <span>üìù</span>
        </button>
        {% endif %}
        <span class="ai-status" style="display: none;"></span>
    </div>
    {% if widget.ai_allow_custom_prompt %}
    <div class="ai-custom-prompt-modal" style="display: none;">
        <div class="ai-modal-content">
            <div class="ai-modal-header">
                <span class="ai-modal-title">Custom Instructions</span>
                <button type="button" class="ai-modal-close">&times;</button>
            </div>
            <div class="ai-modal-body">
                <textarea class="ai-custom-prompt-input" 
                          placeholder="Enter specific instructions for content generation..."
                          rows="2"></textarea>
            </div>
            <div class="ai-modal-footer">
                <button type="button" class="ai-modal-btn ai-modal-cancel">Cancel</button>
                <button type="button" class="ai-modal-btn ai-modal-generate">Generate</button>
            </div>
        </div>
    </div>
    {% endif %}
</div>
